<div class="wallet-container">
    <h2>Admin Wallet</h2>
    <div class="items">
        <div class="row">
            <button class="add-balance-button" (click)="toggleAddAllBalanceForm()">Add Same Amount to All</button>
            <form class="add-all-form" *ngIf="showAddAllBalanceForm" (submit)="addAllBalance()">
                <input type="number" [(ngModel)]="amountToAddToAll" placeholder="Enter amount to add">
                <div class="add-all-buttons">
                    <button type="submit">Add</button>
                    <button type="button" (click)="cancelAddAllBalance()">Cancel</button>
                </div>
            </form>
        </div>
        <input class="searchbox" type="text" placeholder="Search by ID or Name" [(ngModel)]="searchQuery"
            (ngModelChange)="search()">

        <input class="pageSize" type="number" id="pageSize" [(ngModel)]="pageSize"
            (change)="updateDisplayedCustomers()">
        <label for="pageSize">Page Size:</label>
    </div>
    <table>
        <!-- Table header -->
        <thead>
            <tr>
                <th>Customer ID</th>
                <th>Name</th>
                <th>Balance</th>
                <th>Action</th>
            </tr>
        </thead>
        <!-- Table body -->
        <tbody>
            <tr *ngFor="let customer of displayedCustomers">
                <td>{{ customer.id }}</td>
                <td>{{ customer.name }}</td>
                <td>{{ customer.balance }}</td>
                <td>
                    <button class="addBalance" (click)="toggleAddBalance(customer)">Add Balance</button>
                    <form class="form" *ngIf="customer.isAddingBalance" (submit)="saveAddedBalance($event, customer)">
                        <input type="number" [(ngModel)]="customer.amountToAdd" placeholder="Enter amount to add">
                        <div class="buttons">
                            <button type="submit">Save</button>
                            <button type="button" (click)="cancelAddBalance(customer)">Cancel</button>
                        </div>
                    </form>
                </td>
            </tr>
        </tbody>
    </table>
    <!-- Pagination  -->
    <div class="pagination-container">
        <div class="pagination" [ngStyle]="{ 'height': totalPages > 5 ? '200px' : 'auto' }">
            <button (click)="prevPage()" [disabled]="currentPage === 1"
                [class.disabled]="currentPage === 1">Previous</button>
            <div class="page-numbers">
                <button *ngFor="let page of pages" (click)="goToPage(page)" [class.active]="currentPage === page">{{
                    page }}</button>
            </div>
            <button (click)="nextPage()" [disabled]="currentPage === totalPages"
                [class.disabled]="currentPage === totalPages">Next</button>
        </div>
    </div>
</div>